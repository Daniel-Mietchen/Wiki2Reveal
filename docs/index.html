<!DOCTYPE html>
<html>
  <head>
    <title>Starter for Wiki2Reveal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/wtf_wikipedia.js"></script>
    <script src="js/linkparam.js"></script>
  </head>
  <body style="margin:10px;background:#C0C0C0;font-family:Arial,Helvetica,sans-serif">
    <script>
      function el(pID) {
        return document.getElementById(pID)
      };

      function callWikiDisplay() {
        var vURL = "https://"+el("sWikiLanguage").value + "." + el("sWikiDomain").value+".org/wiki/";
        vURL += encodeURI(el("tTitle").value);
        //document.location.href=vURL;
        window.open(vURL);
      };

      function callWikiSource() {
        var vURL = "wiki2";
        vURL += el("sSlideType").value + "_textarea.html?";
        vURL += "language="+el("sWikiLanguage").value;
        vURL += "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };

      function callWTFSource() {
        var vURL = "wtf2";
        vURL += "html_textarea.html?";
        vURL += "language="+el("sWikiLanguage").value;
        vURL += "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };
      function callWiki2DZSlides() {
        var vURL = "wiki2dzslides.html?language="+el("sWikiLanguage").value + "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };

      function callWiki2Reveal() {
        var vURL = "wiki2reveal.html?language="+el("sWikiLanguage").value + "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };

      function callWikiFooter() {
        var vURL = "wiki2reveal_footer.html?language="+el("sWikiLanguage").value + "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };

      function callWikiDemoPage() {
        var vURL = "wiki2reveal_footer.html?language="+el("sWikiLanguage").value + "&domain=" + el("sWikiDomain").value;
        vURL += "&title="+encodeURI(el("tTitle").value);
        vURL += "&author="+encodeURI(el("tAuthor").value);
        vURL += "&demo=yes";
        vURL += "&audioslide="+encodeURI(el("sAudioSlide").value);
        //document.location.href=vURL;
        window.open(vURL);
      };


      function submit2presentation() {
        var vSlideType = el("sSlideType").value;
        if (vSlideType == "dzslides") {
          console.log("Start DZSlides");
          callWiki2DZSlides();
        } else {
          console.log("Start RevealJS");
          callWiki2Reveal();
        }
      }

      function setWikiLanguage(pLang) {
        console.log("Set Wiki Language to '" + pLang + "'");
      }

    </script>
    <hr>
      <center>
        <h2>Wiki2Reveal Starter</h2>
        <h3><i>based on Library: <a href="https://www.npmjs.com/package/wtf_wikipedia" target="_blank">wtf_wikipedia NPM</a></i></h3>
      </center>
    <hr>
    <center>
    <p>
      <a href="https://www.github.com/niebert/Wiki2Reveal" target="_blank">Wiki2Reveal</a> can download a Wiki source text on the fly and create a <a href="https://github.com/hakimel/reveal.js" target="_blank">RevealJS presentation</a>.<br>
      The Wiki source text should be separated in small sections that fit on a page (see <a href="https://en.wikiversity.org/wiki/PanDocElectron/Presentation" target="_blank">PanDocElectron-SLIDE</a>)
    </p>
    <br>
    <form action="wiki2reveal.html" target="_blank">
    <table border="1">
      <tr>
        <td>
          <b>Wiki Domain</b>
        </td>
        <td>
          <select name="domain" id="sWikiDomain">
               <option value="wikiversity" selected>Wikiversity</option>
               <option value="wikipedia">Wikipedia</option>
               <option value="wikibook">WikiBook</option>
               <option value="wiktionary">Wikionary</option>
               <option value="wikiquote">WikiQuote</option>
               <option value="wikisource">WikiSource</option>
            </select>
          </td>
      </tr>
      <tr>
        <td>
          <b>Article</b>
        </td>
        <td>
          <input type="text" size="80" name="title" id="tTitle" value="Normen, Metriken, Topologie">
        </td>
      </tr>
      <tr>
        <td>
          <b>Course/Author</b>
        </td>
        <td>
          <input type="text" size="80" name="author" id="tAuthor" value="Kurs:Funktionalanalysis">
        </td>
      </tr>
      <tr>
          <td>
            <b>Audio Slides</b>
          </td>
          <td>
            <select name="slidetype" id="sSlideType">
                 <option value="reveal" selected>Reveal JS</option>
                 <option value="dzslides">DZ Slides</option>
            </select>
            <select name="audioslide" id="sAudioSlide">
              <option value="yes">Use Player for Audio Slides</option>
              <option value="no">NO Audio Slides</option>
            </select>
          </td>
      </tr>
      <tr>
          <td>
            <b>Language</b>
          </td>
          <td>
            <select name="language" id="sWikiLanguage" onchange="setWikiLanguage(this.value)">
                 <option value="en">English</option>
                 <option value="es">Spanish</option>
                 <option value="de"  selected="selected">German</option>
                 <option value="fr">French</option>
                 <option value="it">Italian</option>
                 <option value="nl">Dutch</option>
                 <option value="ja">Japanese</option>
                 <option value="pl">Polish</option>
                 <option value="ru">Russian</option>
                 <option value="sv">Swedish</option>
                 <option value="vi">Vietnamese</option>
                 <option value="ar">Arabic</option>
                 <option value="id">Indonesian</option>
                 <option value="ms">Malay</option>
                 <option value="ca">Catalan</option>
                 <option value="cs">Czech</option>
                 <option value="eu">Basque</option>
                 <option value="fa">Persian</option>
                 <option value="ko">Korean</option>
                 <option value="hu">Hungarian</option>
                 <option value="no">Norwegian</option>
                 <option value="pt">Portuguese</option>
                 <option value="ro">Romanian</option>
                 <option value="sr">Serbian</option>
                 <option value="sh">Serbo-Croatian</option>
                 <option value="fi">Finnish</option>
                 <option value="tr">Turkish</option>
                 <option value="uk">Ukrainian</option>
                 <option value="zh">Chinese</option>
                 <option value="bs">Bosnian</option>
                 <option value="bg">Bulgarian</option>
                 <option value="da">Danish</option>
                 <option value="et">Estonian</option>
                 <option value="el">Greek</option>
                 <option value="eo">Esperanto</option>
                 <option value="gl">Galician</option>
                 <option value="he">Hebrew</option>
                 <option value="hr">Croatian</option>
                 <option value="lv">Latvian</option>
                 <option value="lt">Lithuanian</option>
                 <option value="nn">Norwegian Nynorsk</option>
                 <option value="sk">Slovak</option>
                 <option value="sl">Slovenian</option>
                 <option value="th">Thai</option>
               </select>
          </td>
      </tr>
      <tr>
        <td>
          <b>Wiki Presentation:</b>
        </td>
        <td>
          <input type="button" id="bWikiDisplay" value="Display Wiki Source" onclick="callWikiDisplay()">
          <input type="button" id="bWikiFooter" value="Wiki Footer" onclick="callWikiFooter()">
          <input type="button" id="bWikiDemoPage" value="Create Demo Page" onclick="callWikiDemoPage()">
          <input type="button" id="bWikiSource" value="Display Reveal Source" onclick="callWikiSource()">
          <input type="button" id="bWtfSource" value="WTF WikiSource" onclick="callWTFSource()">
          <!--
          <input type="button" id="bWiki2Presentation" value="Display Presentation" onclick="submit2presentation()">
          <input type="submit" id="bSubmit" onclick="submit2presentation()" value="Download Presentation">
         -->
        </td>
      </tr>
      <tr>
        <td colspan="2" align="center" style="height:45px">
          <a href="#" class="bluebutton" id="bConvertPresentation" onclick="submit2presentation();return false"><img height="20px" src="img/icons-svg/action-white.svg"> Display Presentation</a>
          <!--
          <button class="bluebutton" id="bConvertPresentation" onclick="submit2presentation();return false"><img src="img/icons-svg/action-white.svg">Display Presentation</button>
        -->
        </td>
      </tr>
    </table>
    </form>
    </center>
    <br>
    <p>
    <div id="footer" align="center" style="font-size: 80%">
				<a href="https://en.wikiversity.org/wiki/PanDocElectron" target="_blank">Wikiversity:PanDocElectron</a><br>
				<a href="https://www.github.com/niebert/Wiki2Reveal" target="_blank">GitHub-Repo- Version: <div id4marker="version" style="display: inline-block">2.1.10</div> </a>
         - Engelbert Niehaus - Date: <div id4marker="datetime" style="display: inline-block">2021/01/04 9:32:44</div> <br/>
				<a href="https://github.com/niebert/Wiki2Reveal/archive/master.zip" target="_blank">Download Wiki2Reveal - GitHub (2020)</a><br/>
			</div>
    </p>
    <hr>
  </body>

  <script>
    function callWikiDownload() {
        downloadWikiDoc(el("wikiarticle").value,el("wikiid").value);
    };

    function downloadWikiDoc(pArticle,pWikiID) {
      wtf.from_api(pArticle, pWikiID, function(markup){// Callback function after success
        console.log("LOG (PlainText result): "+wtf.plaintext(markup));
        // store markup result in textarea
        document.getElementById("wikimarkup").value = markup;
        // store JSON parse result in textarea
        var data = wtf.parse(markup);
        document.getElementById("wikijson").value = JSON.stringify(data,null,4);
      })
    }

    //---------------------------------------
    //------READ LINKPARAMETER---------------
    //---------------------------------------
    var vLinkParam = new LinkParam();
    vLinkParam.init(document);
    //------ TiTLE --------------------------
    if (vLinkParam.exists("title")) {
      // e.g. index.html?title=Normen,_Metriken,_Topologie
      el("tTitle").value = vLinkParam.getValue("title");
    };
    if (vLinkParam.exists("article")) {
      // e.g. index.html?title=Normen,_Metriken,_Topologie
      el("tTitle").value = vLinkParam.getValue("article");
    };
    //------ AUTHOR -------------------------
    if (vLinkParam.exists("author")) {
      // e.g. index.html?author=Engelbert_Niehaus
      el("tAuthor").value = vLinkParam.getValue("author");
    };
    //------ LANGUAGE ----------------------
    if (vLinkParam.exists("language")) {
      // e.g. index.html?language=de
      el("sWikiLanguage").value = vLinkParam.getValue("language");
    };
    //------ DOMAIN ------------------------
    if (vLinkParam.exists("domain")) {
      // e.g. index.html?domain=wikipedia
      el("sWikiDomain").value  = vLinkParam.getValue("domain");
    };
    //------ AUDIO SLIDE ------------------------
    if (vLinkParam.exists("audioslide")) {
      // e.g. index.html?domain=wikipedia
      el("sAudioSlide").value = vLinkParam.getValue("audioslide");
    };
    //------ SLIDE TYPE------------------------
    if (vLinkParam.exists("slidetype")) {
      // e.g. index.html?domain=wikipedia
      el("sSlideType").value = vLinkParam.getValue("slidetype");
    };
    //--------------------------------------

    //console.log(JSON.stringify(el("sWikiLanguage"),null,4));
    // console.log(JSON.stringify(getOption4Select("sWikiLanguage"),null,4))
// immediate function to preserve global namespace
  </script>
</html>
