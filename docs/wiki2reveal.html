<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc EN">
  <title>wiki2reveal</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="reveal/css/theme/beige.css" id="theme">
  <!-- Original Settings do not have the following CSS inserted directly -->
  <link rel="stylesheet" href="reveal/css/print/paper.css"/>
  <script src="js/wtf_wikipedia.min.js"></script>
  <script src="js/wiki2reveal.js"></script>
  <script src="js/linkparam.js"></script>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal/css/print/pdf.css' : 'reveal/css/print/paper.css';
    //---Uncomment the follow appendChild if you remove the CSS paper.css---
   //  document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal/lib/js/html5shiv.js"></script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <![endif]-->

  <script>
  //---------------------------------------
  //------DEFAULT VALUES-------------------
  //---------------------------------------
  var vTitle = "Normen, Metriken, Topologie";
  var vAuthor = "Wikiversity DE";
  var vLanguage = "de";
  var vDomain = "wikiversity";
  //---------------------------------------
  var vOffline = false; // set to true for Debugging in offline mode
  //---------------------------------------

  function el(pID) {
    return document.getElementById(pID)
  };

  function setWikiID() {
    el("wikiid").value = el("sWikiLanguage").value + el("sWikiDomain").value
  };

  function callWikiDisplay() {
    var vURL = "https://"+el("sWikiLanguage").value + "." + el("sWikiDomain").value+".org/wiki/";
    vURL += encodeURI(el("wikiarticle").value);
    document.location.href=vURL;
  };

</script>

</head>
<body>
  <div class="reveal">
    <div class="slides" id="divslides">
    </div>
  </div>
<div style="display:none">
  <b>Emulated Wiki Source:</b></br>
    <textarea id="wikisrc" rows="12" cols="120">
== Wiki2Reveal Demo ==
Converter used in Offline mode without internet connectivity!
  </textarea>
</div>
</body>

  <script src="reveal/lib/js/head.min.js"></script>
  <script src="reveal/js/reveal.js"></script>

    </body>

    <script>
    //---------------------------------------
    //------READ LINKPARAMETER---------------
    //---------------------------------------
    var vLinkParam = new LinkParam();
    vLinkParam.init(document);
    //------ TiTLE --------------------------
    if (vLinkParam.exists("title")) {
      // e.g. index.html?title=Normen,_Metriken,_Topologie
      vTitle= vLinkParam.getValue("title");
    };
    //------ AUTHOR -------------------------
    if (vLinkParam.exists("author")) {
      // e.g. index.html?author=Engelbert_Niehaus
      vAuthor = vLinkParam.getValue("author");
    };
    //------ LANGUAGE ----------------------
    if (vLinkParam.exists("language")) {
      // e.g. index.html?language=de
      vLanguage = vLinkParam.getValue("language");
    };
    //------ DOMAIN ------------------------
    if (vLinkParam.exists("domain")) {
      // e.g. index.html?domain=wikipedia
      vDomain = vLinkParam.getValue("domain");
    };
    //--------------------------------------
    function callWikiDownload() {
        downloadWikiDoc(vTitle,vLanguage + vDomain);
    };

      function downloadWikiDoc(pArticle,pWikiID) {
        //alert("Emulate MediaWiki Download");
        if (vOffline == true) {
          offlineWikiDoc(pArticle,pWikiID);
        } else {
          onlineWikiDoc(pArticle,pWikiID);
        }
      };

      function offlineWikiDoc(pArticle,pWikiID) {
        //alert("Emulate MediaWiki Download");
        var markup = document.getElementById("wikisrc").value;
        console.log("EMULATED (Download): \n"+markup.substr(0,100)+"...");
        // store markup result in textarea
        processWikiDoc(pArticle,markup);
      };

      function onlineWikiDoc(pArticle,pWikiID) {
        wtf.from_api(pArticle, pWikiID, function(markup){// Callback function after success
          //console.log("LOG (PlainText result): "+wtf.plaintext(markup));
          console.log("DOWNLOAD with wtf_wikipedia.js \n"+markup.substr(0,100)+"...");
          // store markup result in textarea
          //el("wikimarkup").value = markup;
          // store JSON parse result in textarea
          processWikiDoc(pArticle,markup);
        })
      }

      function processWikiDoc(pArticle,markup) {
        // el("divslides").innerHTML = wtf.reveal(markup);
        var htmlout = getWiki2Reveal(markup,vTitle, vAuthor, vLanguage, vDomain);
        // store JSON parse result in textarea
        el("divslides").innerHTML = htmlout; //el("revealsource").value;
        //el("divslides").innerHTML = el("revealsource").value;
        //var vWikiJSON = wtf.parse(markup);
        setTimeout("callRevealInit()",1000)
      }
      callWikiDownload();
      //onlineWikiDoc("Normen, Metriken, Topologie","dewikiversity");
    </script>

</html>
